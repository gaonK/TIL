# 7. 함께 모으기

* **개념 관점**(Conceptual Perspective): 도메인 안에 존재하는 개념과 개념들 사이의 관계를 표현한다.
* **명세 관점**(Specification Perspective): 사용자의 영역인 도메인을 벗어나 개발자의 영역인 소프트웨어로 초점을 옮긴다. 즉, 객체의 인터페이스를 바라보게 된다.
* **구현 관점**(Implementation Perspective): 실제 작업을 수행하는 코드와 연관돼 있다. 객체들이 책임을 수행하는 데 필요한 동작하는 코드를 작성하는 것에 초점을 맞춘다.

개념 관점, 명세 관점, 구현 관점은 동일한 클래스를 세 가지 다른 방향에서 바라보는 것을 의미한다.
클래스는 세 가지 관점을 모두 수용할 수 있도록 개념, 인터페이스, 구현을 함께 드러내야 한다. 


## 인터페이스 정리하기

협력에 필요한 객체의 종류와 책임, 주고받아야 하는 메시지에 대한 대략적인 윤곽을 잡고 난 이후에는 메시지를 정제해서 객체의 인터페이스를 구현 가능할 정도로 상세하게 정제해야 한다.
객체가 수신한 메시지가 객체의 인터페이스를 정리한다. 협력이라는 문맥에서 객체를 떼어내고 수신 가능한 메시지만 추려내면 객체의 인터페이스가 된다. 


## 구현하기

구현하지 않고 머릿속으로만 구상한 설계는 코드로 구현하는 단계에서 대부분 변경된다. 설계 작업은 구현을 위한 스케치를 작성하는 단계지 구현 그 자체일 수 없다.
중요한 것은 설계가 아닌 코드. 최대한 빨리 코드를 구현해서 설계에 이상이 없는지, 설계가 구현 가능한지를 판단해야 한다.
코드를 통한 피드백 없이 깔끔한 설계를 얻을 수 없다.

객체에게 책임을 할당하고 인터페이스를 결정할 때는 가급적 객체 내부의 구현에 대한 어떤 가정도 하지 말아야 한다.
객체가 어떤 책임을 수행해야 하는지를 결정한 후에야 책임을 수행하는 데 필요한 객체의 속성을 결정하라.
이렇게 함으로써 구현 세부 사항을 객체의 공용 인터페이스에 노출시키지 않고 인터페이스와 구현을 깔끔하게 분리할 수 있다.

TDD를 이용해 코드를 구현하며 협력을 설계해 나가라. 


## 코드와 세 가지 관점

#### 개념 관점

소프트웨어 클래스가 도메인 개념의 특성을 최대한 수용하면 변경을 관리하기 쉽고 유지보수성을 향상시킬 수 있다.
소프트웨어 클래스와 도메인 클래스 사이의 간격이 좁으면 좁을수록 기능을 변경하기 위해 뒤적거려야 하는 코드의 양도 줄어든다.


#### 명세 관점

클래스의 public 메서드는 다른 클래스가 협력할 수 있는 공용 인터페이스를 드러낸다. 객체의 인터페이스는 수정하기 어렵다는 점을 명심해야 한다.
최대한 변화에 안정적인 인터페이스를 만들기 위해서 인터페이스를 통해 구현과 관련된 세부 사항이 드러나지 않게 해야 한다.


#### 구현 관점

클래스의 메서드와 속성은 구현에 속하며 공용 인터페이스의 일부가 아니다. 메서드의 구현과 속성의 변경은 외부의 객체에게 영향을 미쳐서는 안 된다.


세 가지 관점이 명확하게 드러날 수 있도록 코드를 개선해라. 명세 관점과 구현 관점이 뒤섞이지 않도록 해야 한다.
인터페이스가 구현 세부 사항을 노출하기 시작하면 아주 작은 변동에도 전체 협력이 요동치는 취약한 설계를 얻을 수 있다.

명세 관점이 설계를 주도하게 하여 설계의 품질을 향상시켜라. 
