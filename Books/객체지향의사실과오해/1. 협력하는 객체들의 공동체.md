# 1. 협력하는 객체들의 공동체

'객체지향이란 실세계를 직접적이고 직관적으로 모델링할 수 있는 패러다임'이라는 말을 흔히들 사용하지만 이는 객체지향이 추구하는 바를 설명하기에 적합하지 않다. 객체지향은 실세계의 모방으로 설명할 것이 아니라, 새로운 세계를 창조하는 것으로 설명하는 것이 더 적합하다. 그럼에도 실세계의 모방이라는 말이 객체지향을 설명할 때 자주 쓰이는 이유는 객체지향의 여러 개념들을 이해하는 데 도움이 되기 때문이다.



## 요청과 응답으로 이루어진 협력

한 객체가 모든 일을 다 할 수는 없다. 적절한 책임을 갖고 있는 객체에게 요청(request)하고, 응답(response)을 받으면서 객체들은 서로 **협력**(collaboration)하는 공동체를 만든다. 일반적으로 요청은 연이어 발생하고, 이에 따라 응답도 연쇄적으로 발생한다. 



## 역할과 책임을 수행하며 협력하는 객체들

객체는 다른 객체와 협력하는 과정에서 특정 **역할**(role)을 부여받는다. 어떤 객체가 협력 안에서 가지는 **책임**(responsibility)이나 의무를 역할이라 한다. 객체는 협력 안에서 특정한 역할을 맡고, 역할에 적합한 책임을 수행한다. 객체지향 설계는 적절한 객체에게 적절한 책임을 할당하는 것에서부터 시작된다. 

시스템의 기능은 작은 책임들로 분리되고 이 책임은 적절한 역할을 수행하는 객체에 의해 수행된다. 객체는 자신의 책임을 다하기 위해 다른 객체에게 연쇄적인 요청, 응답을 주고 받기도 한다. 시스템은 역할과 책임을 수행하는 객체로 분할되고 기능은 객체 간의 연쇄적인 요청, 응답의 흐름으로 구성된 협력으로 구현된댜.

### 역할의 특성

* 여러 객체가 동일한 역할을 수행할 수 있다.
* 역할은 대체 가능성(substitutable)을 의미한다.
* 책임을 수행하는 방법은 자율적으로 선택할 수 있다.
* 한 객체가 동시에 여러 역할을 수행할 수 있다.



## 협력 속에 사는 객체

애플리케이션은 메시지를 주고 받으며 협력하는 객체들로 이루어진다. 협력 공동체의 일원인 객체는 아래와 같은 두 덕목을 갖추고, 그 사이에서 균형을 이뤄야 한다.

1. 객체는 충분히 '**협력적**'이어야 한다.
   - 다른 객체의 요청에 응답해야 한다.
2. 객체는 충분히 '**자율적**'이어야 한다.
   * 객체들은 공동의 목표를 달성하기 위해 협력에 참여하지만 스스로의 결정과 판단에 따라 행동하는 자율적인 존재다. 
   * 요청에 따라 어떤 응답을 보낼 지는 객체 스스로 선택한다.



## 자율적인 객체

객체는 **상태**(state)와 **행위**(behavior)를 하나로 묶는 자율적인 존재다. 객체의 자율성은 캡슐화로부터 나온다. 객체의 상태는 외부에서 알 수 없고, 객체가 무엇을 할 수 있는지(what)만 알 수 있다. 어떻게 그 행위를 하는지(how)는 몰라야 한다. 객체 관점에서 자율성은 자신의 상태를 직접 관리하고 상태를 기반으로 스스로 판단하고 행동할 수 있음을 의미한다. 자율적인 객체로 구성된 공동체는 유지보수가 쉽고 재사용이 용이한 시스템을 구축할 수 있게 한다.



## 협력과 메시지

객체지향에서의 의사소통 수단을 **메시지**라고 한다. 앞서 말했던 요청은 메시지의 전송, 응답은 메시지의 수신이다. 협력은 메시지를 전송하고 수신하는 객체 사이의 관계로 구성된다. 



## 메서드와 자율성

객체가 수신돈 메시지를 처리하는 방법을 **메서드**(method)라고 한다. 외부 요청이 무엇인지 표현하는 메시지와 요청을 처리하기 위한 구체적인 방법인 메서드를 분리하는 것은 객체의 자율성을 높이는 핵심 메커니즘이다. 



## 객체지향의 본질

* 객체지향이란 시스템을 상호작용하는 자율적인 객체들의 공동체로 바라보고 객체를 이용해 시스템을 분할하는 방법이다.
* 자율적인 객체란 상태와 행위를 함께 지니며 스스로 자기 자신을 책임지는 객체를 의미한다.
* 객체는 시스템의 행위를 구현하기 위해 다른 객체와 협력한다. 각 객체는 협력 내에서 정해진 역할을 수행하며 역할은 관련된 책임의 집합이다.
* 객체는 다른 객체와 협력하기 위해 메시지를 전송하고, 메시지를 수신한 객체는 메시지를 처리하는 데 적합한 메서드를 자율적으로 선택한다.



### 객체 vs. 클래스

객체지향의 중심에는 클래스가 아닌 객체가 있다. 많은 사람들이 객체지향을 이야기할 때, 그 중심에 클래스가 있는 것처럼 이야기하지만 이는 적절한 접근 방식이라 할 수 없다. 클래스는 객체지향에서 중요한 컴포넌트이기는 하나, 클래스가 없고 객체만이 존재하는 프로토타입 지향 언어로도 객체지향 설계가 가능하다. 

애플리케이션은 클래스로 구성된 설계도로 보는 관점은 협력하는 객체들의 공동체라는 중요한 개념에서 멀어지게 한다. 클래스의 관점에서 메시지를 주고 받는 객체의 관점으로 사고의 중심을 전환시켜야 한다. '어떤 클래스가 필요한가' 보다는 '어떤 객체들이 어떤 메시지를 주고 받으며 협력하는가'를 생각해야 한다. 

핵심은 적절한 책임을 수행하는 역할 간의 유연하고 견고한 협력 관계를 구축하는 것이다. 클래스는 구축에 필요한 구현 메커니즘이다. 클래스들의 정적인 관계가 아닌 메시지를 주고 받는 객체들의 동적인 관계에 집중하자. 클래스를 지향하는 것이 아니라 객체를 지향하는 것임을 기억하자.

