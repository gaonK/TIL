# 1장: HTTP 개관



### 1.1 HTTP: 인터넷의 멀티미디어 배달부

HTTP는 신뢰성 있는 데이터 전송 프로토콜을 사용한다. 

신뢰성 있는 전송은 HTTP 통신이 전송 중 파괴, 중복, 왜곡되지 않는 것을 보장한다.



### 1.2 웹 클라이언트와 서버

클라이언트는 서버에 HTTP 요청(request)을 보내고 서버는 요청된 데이터를 HTTP 응답(response)으로 돌려준다. 



### 1.3 리소스

웹 서버는 웹 리소스를 관리하고 제공한다. 리소스는 파일이나 동적으로 콘텐츠를 생산하는 프로그램이 될 수 있다. 

#### 1.3.1 미디어 타입

`MIME`: Multipurpose Internet Mail Extensions

웹 서버는 모든 HTTP 객체 데이터에 MIME 타입을 붙인다. (주타입/부타입)

ex) `text/html`, `text/plain`, `image/jpeg`, `image/gif`, `vidieo/quicktime`, `application/vnd.ms-powerpoint`

#### 1.3.2 URI

URI: Uniform Resource Identifier

URI에는 `URL`, `URN` 이 있다. 

#### 1.3.3 URL

URL: Uniform Resource Locator. 리소스 식별자의 가장 흔한 형태.

URL은 특정 서버의 한 리소스에 대한 구체적인 위치를 서술한다. URL은 리소스가 정확히 어디에 있고 어떻게 접근할 수 있는지 알려준다.

* 스킴 - 리소스에 접근하기 위해 사용되는 프로토콜 서술 (예: `http://`)
* 서버의 인터넷 주소 (예: `www.joes-hardware.com`)
* 웹 서버의 리소스 (예: `/specials/saw-blade.gif`)

일반적으로 사용되는 URI는 URL이다.

#### 1.3.4 URN

URN: Uniform Resource Name

리소스의 위치에 영향 받지 않는 유일무이한 이름. 리소스를 옮겨도 문제없이 동작.



### 1.4 트랜잭션

HTTP 트랜잭션: 요청 명령과 응답 결과로 구성

#### 1.4.1 메서드

흔히 쓰이는 메서드

| HTTP 메서드 | 설명                                                         |
| ----------- | ------------------------------------------------------------ |
| GET         | 서버에서 클라이언트로 지정한 리소스를 보내라                 |
| PUT         | 클라이언트에서 서버롤 보낸 데이터를 지정한 이름의 리소스로 저장하라 |
| DELETE      | 지정한 리소스를 서버에서 삭제하라                            |
| POST        | 클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라  |
| HEAD        | 지정한 리소스에 대한 응답에서 HTTP 헤더 부분만 보내라        |

#### 1.4.2 상태 코드 (Status code)

흔히 쓰이는 상태 코드

| HTTP 상태 코드 | 설명                                           |
| -------------- | ---------------------------------------------- |
| 200            | 좋다. 문서가 바르게 반환되었다.                |
| 302            | 다시 보내라. 다른 곳에 가서 리소스를 가져가라. |
| 404            | 없음. 리소스를 찾을 수 없다.                   |

HTTP는 숫자 상태 코드에 사유 구절을 함께 보냄. (예: 200 OK / 200 Document attached)

#### 1.4.3 웹 페이지는 여러 객체로 이루어질 수 있다

웹 페이지는 보통 하나의 리소스가 아닌 리소스의 모음이다.



### 1.5 메시지

HTTP 메시지는 단순한 줄 단위의 문자열로, 이진 형식이 아닌 일반 텍스트다. 

시작줄: 메시지의 첫 줄은 시작줄이다. Request의 경우 무엇을 해야 하는지 Response의 경우 무슨 일이 일어났는지 나타낸다.

헤더: 시작줄 다음에는 0개 이상의 헤더 필드가 이어진다. `key: value` 형식으로 구성. 

본문: 어떤 종류의 데이터든 들어갈 수 있는 메시지 본문이 필요에 따라 올 수 있다. 



### 1.6 TCP 커넥션

TCP(Transmission Control Protocol)

#### 1.6.1 TCP/IP

대중적이고 신뢰성 있는 인터넷 전송 프로토콜. TCP와 IP가 층을 이루는 패킷 교환 네트워크 프로토콜의 집합.

* 오류 없는 데이터 전송
* 순서에 맞는 전달 (데이터는 언제나 보낸 순서대로 도착한다)
* 조각나지 않는 데이터 스트림 (언제든 어떤 크기로든 보낼 수 있다)

#### 1.6.2 접속, IP 주소 그리고 포트 번호

* 웹 브라우저는 서버의 URL에서 호스트 명을 추출한다.
* 웹 브라우저는 서버의 호스트 명을 IP로 변환한다.
* 웹 브라우저는 URL에서 포트번호(있다면)을 추출한다.
* 웹 브라우저는 웹 서버와 TCP 커넥션을 맺는다.
* 웹 브라우저는 서버에  HTTP 요청을 보낸다.
* 서버는 웹 브라우저에 HTTP 응답을 돌려준다.
* 커넥션이 닫히면, 웹 브라우저는 문서를 보여준다.



### 1.7 프로토콜 버전

HTTP/0.9 -> HTTP/1.0 -> HTTP/1.0+ -> HTTP/1.1 -> HTTP/2.0 



### 1.8 웹의 구성요소

* 프락시: 클라이언트와 서버 사이에 위치한 HTTP 중개자
* 캐시: 많이 찾는 웹페이지를 클라이언트 가까이에 보관하는 HTTP 창고
* 게이트웨이: 다른 애플리케이션과 연결된 특별한 웹 서버
* 터널: 단순히 HTTP 통신을 전달하기만 하는 특별한 프락시
* 에이전트: 자동화된 HTTP 요청을 만드는 준지능적(semi-intelligent) 웹 클라이언트

#### 1.8.1 프락시

클라이언트와 서버 사이에 위치하여, 클라이언트의 모든 HTTP 요청을 받아 서버에 전달. 프락시는 주로 보안을 위해 사용되고 요청과 응답을 필터링한다.

#### 1.8.2 캐시

웹 캐시와 캐시 프락시는 자신을 거쳐 가는 문서들 중 자주 찾는 것의 사본을 저장해 두는 특별한 종류의 HTTP 프락시 서버다. HTTP는 캐시를 효율적으로 동작하게 하고 캐시된 콘텐츠를 최신 버전으로 유지하면서 동시에 프라이버시도 보호하기 위한 많은 기능을 제공한다.

#### 1.8.3 게이트웨이

다른 서버들의 중개자로 동작하는 특별한 서버로 주로 HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용된다. 

#### 1.8.4 터널

두 커넥션 사이에서 Raw 데이터를 열어보지 않고 그대로 전달하는 HTTP 애플리케이션이다. 비 HTTP 데이터를 하나 이상의 HTTP 연결을 통해 그대로 전송해주기 위해 사용된다. 

#### 1.8.5 에이전트

사용자 에이전트는 사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램이다. (예: 웹 브라우저)



### 기타: 참고할 만한 자료들

* HTTP Pocket Reference

* http://www.w3.org/Protocols/
* http://www.ietf.org/rfc/rfc2616.txt
* http://www.ietf.org/rfc/rfc1945.txt
* http://www.w3.org/Protocols/HTTP/AsImplemented.html
