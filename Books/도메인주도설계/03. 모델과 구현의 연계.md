# 03. 모델과 구현의 연계

소프트웨어 개발 프로젝트의 맥락에서 모델은 다양한 형태로 나타나며 여러 역할을 수행한다.
도메인 주도 설계에서는 초기 분석 단계에 도움될 뿐 아니라 설계의 기반이 되는 모델이 필요하다.

## MODEL-DRIVEN DESIGN (모델 주도 설계)

코드와 그것의 기반이 되는 모델이 긴밀하게 연결되면 코드에 의미가 부여되고 모델과 코드가 서로 대응하게 된다.

설계 혹은 설계의 주된 부분이 도메인 모델과 대응되지 않는다면 그 모델은 그다지 가치가 없고, 소프트웨어의 정확함도 의심스러워진다.
모델과 설계 기능 사이의 복잡한 대응은 이해하기 힘들고, 실제로 설계가 변경되면 유지보수가 불가능해진다.
분석과 설계가 치명적으로 동떨어지고 각각의 활동에서 얻은 통찰력이 서로에게 전해지지 않는다.

도메인 모델을 설계에 밀접하게 연관시키는 원칙을 강제하면 각종 모델 가운데 좀 더 유용한 것을 선택하는 기준이 만들어진다.
이를 위해서 많은 고민이 필요하고 보통 수차례에 걸린 반복주기와 상당한 양의 리팩터링이 필요하지만 관련성 있는 모델을 만들 수 있다.

소프트웨어 시스템의 일부를 설계할 때는 도메인 모델을 있는 그대로 반영해서 설계와 모델의 대응을 분명하게 하라.
모델을 재검토해서 더 자연스럽게 소프트웨어로 구현될 수 있도록 수정해야 한다.
도메인에 관한 심층적인 통찰력을 반영하려 할 때도 마찬가지다.
UBIQUITOUS LANGUAGE를 지원하는 것과 더불어 분석과 설계의 두 가지 측면을 충분히 만족하는 하나의 모델을 만들어야 한다.

모델로부터 설계와 기본적인 책임 할당에 사용한 용어를 도출해라.
이런 용어를 이용하면 코드가 모델을 표현한 것이 되고, 코드의 변경이 곧 모델의 변경으로 이어질 수 있다.

구현을 모델과 그대로 묶으려면 보통 객체지향 프로그래밍 같은 모델링 패러다임을 지원하는 소프트웨어 개발 도구와 언어가 필요하다.


### 모델링 패러다임과 도구 지원

MODEL-DRIVEN DESIGN이 성과를 내려면 모델과 구현이 직접적으로 대응해야 한다.
밀접한 대응이 가능하려면 직접적으로 대응할 수 있는 소프트웨어 도구가 뒷받침되는 모델링 패러다임 내에서 업무를 하는 것이 필수적이다.
객체지향 프로그래밍은 모델링 패러다임에 근거하고 모델의 구성요소에 대한 구현을 제공하기 때문에 이 같은 관점에서 효과적이다.


### 내부 드러내기: 왜 모델이 사용자에게 중요한가

MODEL-DRIVEN DESIGN에서는 오로지 하나의 모델을 다룰 것을 요구한다.
대상이 되는 두 모델이 서로 다를 경우, 즉 사용자 모델과 설계/구현 모델이 별도로 존재하는 것은 문제를 일으키게 된다. 

설계가 사용자와 도메인 전문가의 기본적인 관심사를 반영하는 모델에 기반을 두면 설계의 골격이 다른 설계 접근법에 비해 더 큰 범위에 걸쳐 사용자에게 드러날 수 있다.
모델이 드러나면 사용자가 소프트웨어의 잠재력을 좀 더 많이 접하게 되어 일관성 있고 예상 가능한 행위가 나타날 것이다.


## HANDS-ON MODELER (실천적 모델러)

'소프트웨어 개발의 모든 것은 설계다'라는 개념이 많은 프로젝트를 엉망으로 만들었다. 
분석과 모델링, 설계, 프로그래밍에 대한 책임을 지나치게 구분하는 것은 MODEL-DRIVEN DESIGN과 상충한다.

모델의 의도 중 일부가 이관되면서 사라져 버렸고, 모델의 구현과 기술과의 상호작용에 대한 피드백이 간접적이다.

코드를 작성하는 사람이 모델에 책임을 못 느끼거나 애플리케이션을 대상으로 모델이 동작하게 하는 법을 모른다면 모델은 소프트웨어와 무관해진다.
코드의 변경이 곧 모델의 변경이라는 점을 개발자가 인식하지 못하면 리팩터링은 모델을 강화시키지 못하고 약화시킬 것이다.
한편 모델러가 구현 프로세스와 분리되어 있을 때는 구현상의 제약조건을 감안하는 능력을 감추지 못하거나 잃어버릴 것이다. 
모델이 효과적인 구현을 뒷받침하고 핵심 도메인 지식을 추상화하는 MODEL-DRIVEN DESIGN의 기본 제약조건은 절반쯤 사라지고 결과로 나타나는 모델은 실용적이지 못할 것이다.
MODEL-DRIVEN DESIGN 과정의 미묘한 사항은 협업을 통해 알 수 있는데 설계자가 구현을 못해서 개발자와 업무의 단절이 생긴다면 숙련된 설계자의 지식과 솜씨는 다른 개발자에게 전달될 수 없다.

모델에 기여하는 모든 기술자는 일차적 역할과 관계없이 코드를 접하는데 어느 정도 시간을 투자해야 한다. 
코드를 변경하는 책임이 있는 모든 사람은 코드를 통해 모델을 표현하는 방법을 반드시 배워야 한다.

모든 개발자는 모델에 관한 일정 수준의 토의에 깊이 관여해야 하며 도메인 전문가와도 접촉해야 한다.
다른 방식으로 모델에 기여하는 사람들은 UBIQUITOUS LANGUAGE를 토대로 아이디어를 나누는 데 적극적으로 참여해야 한다.




