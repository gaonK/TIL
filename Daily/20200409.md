# 🌿20200409 Daily 회고

* 기술 스택 부재의 슬픔을 많이 느낀 하루였다. MongoDB를 알지 못한 채 MongoDB migration script를 작성하기란 정말 어려운 일이었다. task를 빨리 처리하고 싶은 욕심에 내 안에서 개념이 뒤죽박죽인 채로 한참을 헤맸다. 간단한 용어조차 제대로 정리되지 않은 상태에서 구글링만 하면 문제가 해결되겠냐? ㅎ 못났다! 🙀 나중에서야 '아, 그냥 한 번 읽을 걸.' 하는 생각이 들었다고 하면 너무 바보 같은가... ㅎ
* 데이터베이스, 그리고 스키마와 관련된 것들을 테스트하려면 어떻게 하는 것이 좋을까? 실제 데이터베이스를, 특히 마이그레이션을 위해 테스트하는 것이기 때문에 실제 스키마와 유사한, 테스트에 필요한 필드만을 담은 스키마와 모델을 만들고 이를 테스트에 이용할 수 있게 만들기로 했다. 이렇게 새로운 스키마를 정의해서 테스트를 했을 때의 장점은, 필요한 필드만을 이용하고 있기 때문에 실제로 나중에 테스트하려는 스키마가 조금 변경되더라도 테스트가 깨지지 않을 확률이 올라간다. 사실 원본 스키마 자체가 너무 많이 변한다면 깨질 수밖에 없긴 하다. 하지만 이렇게 함으로써 테스트 수명이 조금 더 연장되는 효과를 가져올 수 있다.

* mongoose도 결국은 native mongo db를 이용하고 있는 것일텐데! 나는 왜 이렇게 둘 사이를 왔다갔다하는 것이 힘들까? 너무 빠른 길만 찾으려 하지 말고 내일은 조금 차분히 코드들을 따라가며 생각이란 걸 좀 해 보자. mongoose는 모델의 스키마를 정의하도록 하지만, 일반적인 mongodb는 동적 스키마를 지원하기 때문에 내가 생각했던 대로 잘 안 되고 있는 것 같다. 다른 분들에겐 쉬운 작업이겠지만 그분들도 분명 이걸 잘 사용하기 위해 공부했던 시간이 있지 않았을까... 내일은 일찍 출근해서 MongoDB 공부를 좀 해 보자... 😿나도 내가 답답해...!

